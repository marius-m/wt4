package lt.markmerkk.mvp

import com.nhaarman.mockito_kotlin.*
import org.junit.Assert.*
import org.junit.Test
import org.mockito.ArgumentCaptor

/**
 * @author mariusmerkevicius
 * *
 * @since 2016-11-22
 */
class SearchOpenPresenterImplOpenTest {
    val view: SearchOpenMvp.View = mock()
    val interactor: HostServicesInteractor = mock()
    val presenter = SearchOpenPresenterImpl(view, interactor)

    @Test
    fun valid_open() {
        // Arrange
        // Act
        presenter.open("wt4")

        // Assert
        val captor = argumentCaptor<String>()
//        verify(interactor).openExternalIssue(capture {
//            assertEquals("WT-4", it)
//        })
        verify(interactor).openExternalIssue(captor.capture())
        assertEquals("WT-4", captor.firstValue)
    }

    @Test
    fun invalid_ignore() {
        // Arrange
        // Act
        presenter.open("wt")

        // Assert
        verify(interactor, never()).openExternalIssue(any())
    }

    @Test
    fun invalid2_ignore() {
        // Arrange
        // Act
        presenter.open("wt")

        // Assert
        verify(interactor, never()).openExternalIssue(any())
    }

    @Test
    fun empty_ignore() {
        // Arrange
        // Act
        presenter.open("")

        // Assert
        verify(interactor, never()).openExternalIssue(any())
    }

}